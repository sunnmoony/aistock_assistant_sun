# A股智能助手 - 部署与安装完全手册

> 本手册适用于 v2.0 版本，帮助您快速部署和使用A股智能助手

---

## 📋 目录

1. [快速开始](#快速开始)
2. [详细安装步骤](#详细安装步骤)
3. [启动方式说明](#启动方式说明)
4. [配置指南](#配置指南)
5. [常见问题解决](#常见问题解决)
6. [高级配置](#高级配置)

---

## 🚀 快速开始

### 系统要求

| 项目 | 最低配置 | 推荐配置 |
|------|---------|---------|
| 操作系统 | Windows 7 | Windows 10/11 |
| Python | 3.8 | 3.10+ |
| 内存 | 2GB | 4GB+ |
| 硬盘 | 500MB | 1GB |
| 网络 | 需要互联网连接 | 宽带网络 |

### 三步启动

```
第一步：安装Python（如未安装）
第二步：双击运行 install.bat
第三步：双击运行 run.bat
```

---

## 📖 详细安装步骤

### 步骤一：安装Python

#### Windows系统

1. **下载Python**
   - 访问 https://www.python.org/downloads/
   - 下载 Python 3.8 或更高版本
   - 推荐下载 Python 3.10 或 3.11

2. **安装Python**
   - 双击下载的安装程序
   - **重要**：勾选 "Add Python to PATH"
   - 点击 "Install Now" 或自定义安装

3. **验证安装**
   ```cmd
   python --version
   ```
   应显示类似：`Python 3.10.x`

### 步骤二：安装项目依赖

1. **运行安装脚本**
   ```
   双击 install.bat
   ```

2. **等待安装完成**
   - 安装过程约需2-5分钟
   - 看到提示"安装完成"即可

3. **手动安装（可选）**
   ```cmd
   pip install -r requirements_minimal.txt
   ```

### 步骤三：启动程序

选择以下任一方式启动：

| 方式 | 脚本 | 说明 |
|------|------|------|
| 标准模式 | run.bat | 完整功能，适合大多数电脑 |
| 轻量模式 | run_lite.bat | 内存优化，适合低配置电脑 |
| 智能启动 | check_and_run.bat | 自动检测并推荐启动模式 |

---

## 🎯 启动方式说明

### 标准模式 (run.bat)

**特点**：
- 完整功能体验
- 自动刷新数据
- 所有UI组件加载

**适合**：
- 内存 4GB 以上的电脑
- 需要完整功能的用户

### 轻量模式 (run_lite.bat)

**特点**：
- 内存占用减少约40%
- 延迟加载非必要组件
- 减少刷新频率

**适合**：
- 内存 2-4GB 的电脑
- 低配置电脑
- 只需要基础功能的用户

### 智能启动 (check_and_run.bat)

**特点**：
- 自动检测系统配置
- 推荐最佳启动模式
- 提供多种选择

**适合**：
- 不确定选择哪种模式的用户
- 首次使用的用户

---

## ⚙️ 配置指南

### 基础配置（config.yaml）

程序首次启动会自动创建默认配置文件：

```yaml
# 应用设置
app:
  name: A股智能助手
  version: "2.0"
  language: zh-CN

# 数据设置
data:
  auto_refresh: true      # 自动刷新
  refresh_interval: 30    # 刷新间隔（秒）
  cache_enabled: true     # 启用缓存

# 数据源设置
data_sources:
  pytdx:
    enabled: true
    priority: 0           # 优先级（数字越小越优先）
  akshare:
    enabled: true
    priority: 1
  mock:
    enabled: true
    priority: 2

# AI设置（可选）
ai:
  api_key: ""             # API密钥
  api_url: https://api.siliconflow.cn/v1
  model: deepseek-ai/DeepSeek-V3

# 通知设置
notification:
  enabled: true
  sound: true
```

### AI功能配置（可选）

AI功能为可选功能，不影响基础使用。如需启用：

1. **获取API密钥**
   - 访问 https://siliconflow.cn/
   - 注册账号（支持微信登录）
   - 进入控制台获取API密钥
   - 免费额度足够日常使用

2. **配置API密钥**
   - 打开 `config.yaml`
   - 在 `ai.api_key` 处填写密钥

### 数据源配置

#### 使用配置向导

```
双击运行 config_datasource.bat
```

#### 支持的数据源

| 数据源 | 类型 | 特点 | 推荐指数 |
|--------|------|------|----------|
| 通达信(Pytdx) | 免费 | 实时行情、稳定快速 | ⭐⭐⭐⭐⭐ |
| AkShare | 免费 | 功能全面、数据丰富 | ⭐⭐⭐⭐⭐ |
| Tushare | 需注册 | 专业数据、需Token | ⭐⭐⭐ |
| Baostock | 免费 | 复权数据、历史数据 | ⭐⭐⭐ |

---

## ❓ 常见问题解决

### 安装问题

#### Q: 提示"Python未找到"
**原因**：Python未安装或未添加到环境变量

**解决方案**：
1. 重新安装Python
2. 安装时勾选 "Add Python to PATH"
3. 或手动添加Python到环境变量

#### Q: pip安装失败
**解决方案**：
```cmd
# 更新pip
python -m pip install --upgrade pip

# 使用国内镜像
pip install -r requirements_minimal.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
```

### 启动问题

#### Q: 程序启动后闪退
**解决方案**：
1. 检查 logs 目录下的日志文件
2. 尝试使用轻量模式：`run_lite.bat`
3. 重新安装依赖：运行 `install.bat`

#### Q: 无法获取股票数据
**解决方案**：
1. 检查网络连接
2. 清除代理设置（程序已自动处理）
3. 运行数据源配置向导：`config_datasource.bat`

### 运行问题

#### Q: 程序运行卡顿
**解决方案**：
1. 使用轻量模式：`run_lite.bat`
2. 减少自选股数量
3. 增加刷新间隔（在config.yaml中修改）

#### Q: 内存占用过高
**解决方案**：
1. 使用轻量模式
2. 定期重启程序
3. 减少缓存时间

---

## 🔧 高级配置

### 环境变量

| 变量名 | 说明 | 示例 |
|--------|------|------|
| AISTOCK_LITE_MODE | 轻量模式 | 1 |

### 命令行参数

```cmd
# 标准模式
python main.py

# 轻量模式
python main.py --lite

# 查看帮助
python main.py --help
```

### 自定义数据源

编辑 `config.yaml`：

```yaml
data_sources:
  pytdx:
    enabled: true
    priority: 0
    server_host: "119.147.212.81"
    server_port: 7709
  akshare:
    enabled: true
    priority: 1
```

---

## 📞 技术支持

### 获取帮助

1. 查看本手册
2. 查看 `docs/` 目录下的其他文档
3. 查看 `logs/` 目录下的日志文件

### 日志文件

日志文件位于 `logs/` 目录，包含详细的运行信息。

---

## 📝 更新日志

### v2.0
- ✅ 新增一键安装脚本
- ✅ 新增轻量模式
- ✅ 新增智能启动检测
- ✅ 优化数据源连接
- ✅ 完善新手文档

---

**祝您使用愉快！** 🎉
